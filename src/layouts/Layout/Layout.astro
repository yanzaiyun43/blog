---
const { title, keywords, description, pagecover, activeNav, Home } = Astro.props;

// ç½‘ç«™é…ç½®
import SITE_INFO from "@/config";
const { GoogleAds, Theme, HomeBanner } = SITE_INFO;   // â† æ¢å¤ HomeBanner
const { ad_Client, asideAD_Slot, articleAD_Slot } = GoogleAds;

// ç»„ä»¶
import Head from "@/components/Head/Head.astro";
import Header from "@/components/Header/Header.astro";
import MainHeader from "@/components/MainHeader/MainHeader.astro"; // â† æ¢å¤å¼•ç”¨
import Aside from "@/components/Aside/Aside.astro";
import Footer from "@/components/Footer/Footer.astro";
import BackTop from "@/components/BackTop/BackTop.astro";
import MobileSidebar from "@/components/MobileSidebar/MobileSidebar.astro";

// æ ·å¼
import "@/styles/Reset.less";
import "@/styles/Base.less";
import "./Layout.less";
---

<html lang="zh-CN">
  <Head
    Title={title}
    Keywords={keywords}
    Description={description}
    PageCover={pagecover}
  >
    {/* è°·æ­Œå¹¿å‘Š */}
    {ad_Client && (asideAD_Slot || articleAD_Slot) && (
      <script
        is:inline
        async
        src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${ad_Client}`}
        crossorigin="anonymous"
      />
    )}
    {/* å½©æ——ğŸˆ */}
    <script is:inline src="/assets/js/vhCaiqi.js" defer />
    {/* ä¸»é¢˜é¢œè‰²å˜é‡ + æ¨ªå¹…é«˜åº¦/èƒŒæ™¯ */}
    <Fragment
      set:html={`<style>:root {${Object.entries(Theme)
        .map(([k, v]) => `${k}:${v};`)
        .join("")}--vh-main-header-height:${
        HomeBanner.enable ? (Home ? HomeBanner.HomeHeight : HomeBanner.PageHeight) : "0"
      };--vh-home-banner:${HomeBanner.background}}</style>`}
    />
  </Head>

  <body>
    <MobileSidebar />
    <Header activeNav={activeNav} />

    <main class="main">
      {/* æ¨ªå¹…å¼€å…³ */}
      {HomeBanner.enable && <MainHeader />}

      <section
        class="main-inner"
        style={`padding-top:${
          HomeBanner.enable
            ? "0.88rem"
            : "calc(66px + 0.68rem)"
        }`}
      >
        <section class="main-inner-content">
          <slot />
        </section>
        <Aside />
      </section>

      <BackTop />
    </main>

    <Footer />

    <script>
      import InitFn from "@/scripts/Init";
      InitFn();
    </script>
  </body>
</html>
